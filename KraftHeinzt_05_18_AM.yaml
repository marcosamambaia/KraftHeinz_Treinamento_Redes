annotations:
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      === Topologia Layer 3 com VLANs e Internet ===

      [Alpine-0]
        IP: 192.168.10.10
        Gateway: 192.168.10.1
        Conectado √†:
          |
          v
      [IOL-L2 #1]
        - Ethernet0/1: Access VLAN 10 (Alpine-0)
        - Ethernet0/2: Trunk para roteador (E0/0)
          |
          v
      [IOL (4s)]
        - Ethernet0/0: Trunk para IOL-L2 #1
          - Subinterface E0/0.10 ‚Üí VLAN 10 ‚Üí IP 192.168.10.1
          - Subinterface E0/0.20 ‚Üí VLAN 20 ‚Üí IP 192.168.20.1
        - Ethernet0/1: Trunk para IOL-L2 #2
        - Ethernet0/2: Conex√£o externa (Internet)
          - IP: 200.200.200.2
          - Gateway: 200.200.200.1
          |
          v
      [IOL-L2 #2]
        - Ethernet0/1: Access VLAN 20 (Alpine-1)
        - Ethernet0/2: Trunk para roteador (E0/1)
          |
          v
      [Alpine-1]
        IP: 192.168.20.20
        Gateway: 192.168.20.1

      [Internet]
        Conectado ao roteador via Ethernet0/2
        IP externo: 200.200.200.1
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 2240.0
    y1: -3280.0
    z_index: 0
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: Vlan-10
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 2120.0
    y1: -1880.0
    z_index: 1
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: Vlan-20
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 2760.0
    y1: -1880.0
    z_index: 2
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      Roteador#show running-config
      Building configuration...

      Current configuration : 3801 bytes
      !
      ! Last configuration change at 08:22:05 UTC Thu Nov 6 2025
      !
      version 17.16
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname Roteador
      !
      boot-start-marker
      boot-end-marker
      !
      !
      no aaa new-model
      !

      !
      !
      ip cef
      login on-success log
      no ipv6 cef
      !
      !

      !
      !
      !
      crypto pki trustpoint TP-self-signed-131184642
       enrollment selfsigned
       subject-name cn=IOS-Self-Signed-Certificate-131184642
       revocation-check none
       rsakeypair TP-self-signed-131184642
       hash sha512
      !
      !
      crypto pki certificate chain TP-self-signed-131184642
       certificate self-signed 01

              quit
      !
      !
      memory free low-watermark processor 79983
      !
      !
      spanning-tree mode rapid-pvst
      !
      !

      !
      !
      !
      !
      !
      interface Ethernet0/0
       no ip address
      !
      interface Ethernet0/0.10
       encapsulation dot1Q 10
       ip address 192.168.10.1 255.255.255.0
       ip nat inside
      !
      interface Ethernet0/1
       no ip address
      !
      interface Ethernet0/1.20
       encapsulation dot1Q 20
       ip address 192.168.20.1 255.255.255.0
       ip nat inside
      !
      interface Ethernet0/2
       ip address 192.168.255.100 255.255.255.0
       ip nat outside
      !
      interface Ethernet0/3
       no ip address
       shutdown
      !
      interface Serial1/0
       no ip address
       shutdown
       serial restart-delay 0
      !
      interface Serial1/1
       no ip address
       shutdown
       serial restart-delay 0
      !
      interface Serial1/2
       no ip address
       shutdown
       serial restart-delay 0
      !
      interface Serial1/3
       no ip address
       shutdown
       serial restart-delay 0
      !
      ip forward-protocol nd
      ip forward-protocol udp
      !
      !
      ip http server
      ip http secure-server
      ip nat inside source list 1 interface Ethernet0/2 overload
      ip route 0.0.0.0 0.0.0.0 192.168.255.1
      ip ssh bulk-mode 131072
      no logging btrace
      ip access-list standard 1
       10 permit 192.168.10.0 0.0.0.255
       20 permit 192.168.20.0 0.0.0.255
      !
      !
      !
      control-plane
      !
      !
      !
      line con 0
       logging synchronous
      line aux 0
      line vty 0 4
       login
       transport input ssh
      !
      !
      !
      !
      end

      Roteador#
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 2360.0
    y1: -1640.0
    z_index: 3
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      Switch-SW0#show running-config
      Building configuration...

      Current configuration : 3234 bytes
      !
      ! Last configuration change at 08:06:52 UTC Thu Nov 6 2025
      !
      version 17.16
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname Switch-SW0
      !
      boot-start-marker
      boot-end-marker
      !
      !
      no aaa new-model
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      ip audit notify log
      ip audit po max-events 100
      ip cef
      login on-success log
      no ipv6 cef
      !
      !
      !
      !
      !
      !
      !
      !
      crypto pki trustpoint TP-self-signed-131184645
       enrollment selfsigned
       subject-name cn=IOS-Self-Signed-Certificate-131184645
       revocation-check none
       rsakeypair TP-self-signed-131184645
       hash sha512
      !
      !
      crypto pki certificate chain TP-self-signed-131184645
       certificate self-signed 01

              quit
      !
      !
      memory free low-watermark processor 79497
      !
      !
      spanning-tree mode rapid-pvst
      spanning-tree extend system-id
      !
      !
      vlan internal allocation policy ascending
      !
      !
      !
      !
      !
      interface Ethernet0/0
      !
      interface Ethernet0/1
       switchport access vlan 10
       switchport mode access
      !
      interface Ethernet0/2
       switchport trunk encapsulation dot1q
       switchport trunk allowed vlan 10,20
       switchport mode trunk
      !
      interface Ethernet0/3
      !
      ip forward-protocol nd
      ip forward-protocol udp
      !
      !
      ip http server
      ip http secure-server
      ip ssh bulk-mode 131072
      !
      no logging btrace
      !
      !
      !
      control-plane
      !
      !
      !
      line con 0
       logging synchronous
      line aux 0
      line vty 0 4
       login
       transport input ssh
      !
      !
      end

      Switch-SW0#
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 1800.0
    y1: -1640.0
    z_index: 4
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      # 1. Configurar IP fixo
      sudo ip addr add 192.168.20.10/24 dev eth0
      sudo ip link set eth0 up

      # 2. Configurar gateway padr√£o
      sudo ip route add default via 192.168.20.1

      # 3. Testar conectividade interna
      ping 192.168.20.1       # Deve responder (roteador)
      ping 192.168.10.10       # Teste com Alpine da VLAN 10, se estiver ativo

      # 4. Testar internet
      ping 8.8.8.8             # Deve funcionar via NAT

      TUTORIAL: Corrigir DNS no Alpine Linux
      ======================================

      Problema:
      ---------
      O computador consegue pingar endere√ßos IP (como 8.8.8.8), mas n√£o consegue acessar sites como www.google.com.
      Isso indica que o DNS n√£o est√° configurado corretamente.

      Solu√ß√£o:
      --------

      1. Abrir o terminal

      2. Editar o arquivo de configura√ß√£o de DNS:
         Alpine Linux usa o arquivo /etc/resolv.conf para definir os servidores DNS.

         Execute o seguinte comando:
         sudo vi /etc/resolv.conf

         Se estiver usando vi pela primeira vez:
         - Pressione a tecla "i" para entrar no modo de edi√ß√£o
         - Digite as seguintes linhas:
           nameserver 8.8.8.8
           nameserver 1.1.1.1

         - Pressione "Esc"
         - Digite :wq e pressione Enter para salvar e sair

      3. Testar se o DNS est√° funcionando:
         Execute:
         ping www.google.com
         nslookup www.google.com

         Se os comandos responderem, o DNS est√° funcionando corretamente.

      Observa√ß√£o:
      -----------
      Em Alpine Linux, o arquivo /etc/resolv.conf pode ser sobrescrito por servi√ßos como DHCP.

      Para evitar isso, execute:

      sudo rm /etc/resolv.conf
      echo -e "nameserver 8.8.8.8\nnameserver 1.1.1.1" | sudo tee /etc/resolv.conf

      Alternativa via DHCP:
      ---------------------
      Se o computador estiver recebendo IP via DHCP, configure o roteador para fornecer DNS:

      No roteador, execute:

      ip dhcp pool VLAN10
       network 192.168.10.0 255.255.255.0
       default-router 192.168.10.1
       dns-server 8.8.8.8 1.1.1.1

      Fim do tutorial.
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -320.0
    y1: -3560.0
    z_index: 5
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      CONFIGURA√á√ÉO DO ROTEADOR - EXPLICA√á√ÉO COMPLETA

      üìå OBJETIVO:
      Este roteador est√° configurado para:
      - Roteamento entre VLANs 10 e 20
      - Acesso √† internet via NAT
      - Encapsulamento 802.1Q (dot1Q) para subinterfaces
      - Gateway externo via 192.168.255.1
      - Acesso remoto via SSH

      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      üîß INTERFACES E VLANs

      1. Ethernet0/0.10 ‚Üí VLAN 10
      - Subinterface com encapsulamento dot1Q 10
      - IP: 192.168.10.1/24
      - NAT interno ativado (ip nat inside)

      2. Ethernet0/1.20 ‚Üí VLAN 20
      - Subinterface com encapsulamento dot1Q 20
      - IP: 192.168.20.1/24
      - NAT interno ativado (ip nat inside)

      3. Ethernet0/2 ‚Üí Rede externa
      - IP: 192.168.255.100/24
      - NAT externo ativado (ip nat outside)
      - Conectada ao gateway 192.168.255.1

      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      üåê ROTEAMENTO

      Rotas padr√£o configuradas:
      - ip route 0.0.0.0 0.0.0.0 200.200.200.1 ‚Üí (obsoleta, sem uso)
      - ip route 0.0.0.0 0.0.0.0 192.168.255.1 ‚Üí (ativa e funcional)

      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      üîÅ NAT (Network Address Translation)

      1. Tradu√ß√£o de endere√ßos:
      - ip nat inside source list 1 interface Ethernet0/2 overload
      ‚Üí Traduz IPs internos para o IP externo 192.168.255.100

      2. ACL 1 (defini√ß√£o das redes internas permitidas):
      - access-list 1 permit 192.168.10.0 0.0.0.255
      - access-list 1 permit 192.168.20.0 0.0.0.255

      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      üîê ACESSO REMOTO

      - SSH habilitado:
        - ip ssh bulk-mode 131072
        - line vty 0 4
          - login
          - transport input ssh

      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      ‚öôÔ∏è OUTRAS CONFIGURA√á√ïES

      - ip cef ‚Üí Cisco Express Forwarding ativado (melhora desempenho)
      - spanning-tree mode rapid-pvst ‚Üí evita loops na camada 2
      - ip http server / secure-server ‚Üí habilita acesso web (se necess√°rio)

      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      ‚úÖ STATUS ATUAL

      - Roteador com acesso √† internet via 192.168.255.1
      - NAT funcionando para VLANs 10 e 20
      - Pronto para rotear tr√°fego interno e externo

      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 1160.0
    y1: -2640.0
    z_index: 6
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      Roteador#show running-config
      Building configuration...

      Current configuration : 1633 bytes
      !
      ! Last configuration change at 07:46:08 UTC Sun Oct 12 2025
      !
      version 17.16
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname Roteador
      !
      boot-start-marker
      boot-end-marker
      !
      !
      no aaa new-model
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      ip cef
      login on-success log
      no ipv6 cef
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      memory free low-watermark processor 79983
      !
      !
      spanning-tree mode rapid-pvst
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      interface Ethernet0/0
       no ip address
      !
      interface Ethernet0/0.10
       encapsulation dot1Q 10
       ip address 192.168.10.1 255.255.255.0
       ip nat inside
      !
      interface Ethernet0/1
       no ip address
      !
      interface Ethernet0/1.20
       encapsulation dot1Q 20
       ip address 192.168.20.1 255.255.255.0
       ip nat inside
      !
      interface Ethernet0/2
       ip address 192.168.255.100 255.255.255.0
       ip nat outside
      !
      interface Ethernet0/3
       no ip address
       shutdown
      !
      interface Serial1/0
       no ip address
       shutdown
       serial restart-delay 0
      !
      interface Serial1/1
       no ip address
       shutdown
       serial restart-delay 0
      !
      interface Serial1/2
       no ip address
       shutdown
       serial restart-delay 0
      !
      interface Serial1/3
       no ip address
       shutdown
       serial restart-delay 0
      !
      ip forward-protocol nd
      ip forward-protocol udp
      !
      !
      ip http server
      ip http secure-server
      ip nat inside source list 1 interface Ethernet0/2 overload
      ip route 0.0.0.0 0.0.0.0 200.200.200.1
      ip route 0.0.0.0 0.0.0.0 192.168.255.1
      ip ssh bulk-mode 131072
      no logging btrace
      ip access-list standard 1
       10 permit 192.168.10.0 0.0.0.255
       20 permit 192.168.20.0 0.0.0.255
      !
      !
      !
      control-plane
      !
      !
      !
      line con 0
       logging synchronous
      line aux 0
      line vty 0 4
       login
       transport input ssh
      !
      !
      !
      !
      end

      Roteador#
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 640.0
    y1: -3520.0
    z_index: 7
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      Switch-SW1#show running-config
      Building configuration...

      Current configuration : 3234 bytes
      !
      ! Last configuration change at 08:06:55 UTC Thu Nov 6 2025
      !
      version 17.16
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname Switch-SW1
      !
      boot-start-marker
      boot-end-marker
      !
      !
      no aaa new-model
      !
      !

      !
      !
      !
      ip audit notify log
      ip audit po max-events 100
      ip cef
      login on-success log
      no ipv6 cef
      !

      !
      !
      !
      crypto pki trustpoint TP-self-signed-131184646
       enrollment selfsigned
       subject-name cn=IOS-Self-Signed-Certificate-131184646
       revocation-check none
       rsakeypair TP-self-signed-131184646
       hash sha512
      !
      !
      crypto pki certificate chain TP-self-signed-131184646
       certificate self-signed 01

              quit
      !
      !
      memory free low-watermark processor 79497
      !
      !
      spanning-tree mode rapid-pvst
      spanning-tree extend system-id
      !
      !
      vlan internal allocation policy ascending
      !
      !
      !
      !
      !
      interface Ethernet0/0
      !
      interface Ethernet0/1
       switchport access vlan 20
       switchport mode access
      !
      interface Ethernet0/2
       switchport trunk encapsulation dot1q
       switchport trunk allowed vlan 10,20
       switchport mode trunk
      !
      interface Ethernet0/3
      !
      ip forward-protocol nd
      ip forward-protocol udp
      !
      !
      ip http server
      ip http secure-server
      ip ssh bulk-mode 131072
      !
      no logging btrace
      !
      !
      !
      control-plane
      !
      !
      !
      line con 0
       logging synchronous
      line aux 0
      line vty 0 4
       login
       transport input ssh
      !
      !
      end

      Switch-SW1#
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 2920.0
    y1: -1680.0
    z_index: 8
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      ===========================================================
                  MODELO OSI APLICADO AO ETHERNET/IP
      ===========================================================

      | Camada OSI | Nome da Camada   | Protocolos / Tecnologias   | Grupo de Protocolo |
      |------------|------------------|----------------------------|--------------------|
      | 7          | Aplica√ß√£o        | Device Profile             | CIP                |
      | 6          | Apresenta√ß√£o     | Explicit / Implicit Msg    | CIP                |
      | 5          | Sess√£o           | Connection Management      | CIP                |
      | 4          | Transporte       | TCP, UDP                   | TCP/IP             |
      | 3          | Rede             | IP                         | TCP/IP             |
      | 2          | Enlace           | Ethernet MAC               | Ethernet           |
      | 1          | F√≠sica           | Ethernet Physical          | Ethernet           |

      ===========================================================
      Agrupamento por Pilha de Protocolos:
      - Ethernet ‚Üí Camadas 1 e 2
      - TCP/IP   ‚Üí Camadas 3 e 4
      - CIP      ‚Üí Camadas 5 a 7
      ===========================================================
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 3080.0
    y1: -2480.0
    z_index: 9
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      ===========================================================
              COMPARA√á√ÉO: CIP em EtherNet/IP, ControlNet e DeviceNet
      ===========================================================

      | Camada OSI | Fun√ß√£o Principal        | EtherNet/IP                | ControlNet                 | DeviceNet             |
      |------------|-------------------------|----------------------------|----------------------------|-----------------------|
      | 7          | Aplica√ß√£o               | Device Profile (CIP)       | Device Profile (CIP)       | Device Profile (CIP)  |
      | 6          | Apresenta√ß√£o            | Explicit/Implicit Msg (CIP)| Explicit/Implicit Msg (CIP)| Explicit/Implicit Msg |
      | 5          | Sess√£o                  | Connection Management (CIP)| Connection Management (CIP)| Connection Management |
      | 4          | Transporte              | TCP / UDP                  | ControlNet Transport Layer | CAN Transport Layer   |
      | 3          | Rede                    | IP                         | ControlNet Network Layer   | CAN Network Layer     |
      | 2          | Enlace                  | Ethernet MAC               | ControlNet MAC             | CAN MAC               |
      | 1          | F√≠sica                  | Ethernet Physical          | Coaxial / Fiber Physical   | CAN Physical          |

      ===========================================================
      Observa√ß√µes:
      - CIP (Common Industrial Protocol) √© comum √†s tr√™s redes ‚Üí atua nas camadas 5 a 7.
      - EtherNet/IP encapsula CIP em TCP/UDP/IP sobre Ethernet.
      - ControlNet encapsula CIP em uma rede determin√≠stica baseada em token (coaxial/fibra).
      - DeviceNet encapsula CIP sobre CAN (Controller Area Network).
      ===========================================================
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 3080.0
    y1: -3160.0
    z_index: 10
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      ===========================================================
              MODELO OSI APLICADO AO ETHERNET/IP (DETALHADO)
      ===========================================================

      Camada 7 - Aplica√ß√£o
      Protocolos/Tecnologias: Device Profile (CIP)
      Explica√ß√£o: Perfis de dispositivos definem fun√ß√µes padronizadas (sensores, atuadores, CLPs).
      Permitem interoperabilidade entre fabricantes e garantem que diferentes equipamentos
      "falem a mesma l√≠ngua" na camada de aplica√ß√£o.

      -----------------------------------------------------------
      Camada 6 - Apresenta√ß√£o
      Protocolos/Tecnologias: Explicit / Implicit Messaging (CIP)
      Explica√ß√£o:
      - Mensagens expl√≠citas: usadas para configura√ß√£o, diagn√≥stico e leitura de par√¢metros.
      - Mensagens impl√≠citas: usadas para troca c√≠clica de dados de I/O em tempo real,
        garantindo baixa lat√™ncia e sincronismo.

      -----------------------------------------------------------
      Camada 5 - Sess√£o
      Protocolos/Tecnologias: Connection Management (CIP)
      Explica√ß√£o: Gerencia conex√µes CIP (estabelecimento, manuten√ß√£o e encerramento).
      Define se a comunica√ß√£o ser√° ponto-a-ponto ou multicast, assegurando controle
      sobre quem envia e quem recebe dados.

      -----------------------------------------------------------
      Camada 4 - Transporte
      Protocolos/Tecnologias: TCP, UDP
      Explica√ß√£o:
      - TCP: usado para mensagens expl√≠citas, pois garante confiabilidade e confirma√ß√£o.
      - UDP: usado para mensagens impl√≠citas, pois oferece baixa lat√™ncia e rapidez,
        ideal para controle em tempo real.

      -----------------------------------------------------------
      Camada 3 - Rede
      Protocolos/Tecnologias: IP
      Explica√ß√£o: Endere√ßamento l√≥gico (IPv4). Permite roteamento entre sub-redes industriais
      e integra√ß√£o com redes corporativas, conectando ch√£o de f√°brica ao n√≠vel corporativo.

      -----------------------------------------------------------
      Camada 2 - Enlace
      Protocolos/Tecnologias: Ethernet MAC
      Explica√ß√£o: Define endere√ßos MAC e formato dos quadros Ethernet.
      Controla o acesso ao meio f√≠sico e garante entrega de quadros entre dispositivos
      na mesma rede local.

      -----------------------------------------------------------
      Camada 1 - F√≠sica
      Protocolos/Tecnologias: Ethernet Physical
      Explica√ß√£o: Meio f√≠sico de transmiss√£o (cabos par tran√ßado Cat5e/Cat6, fibra √≥ptica).
      Define velocidade (10/100/1000 Mbps) e sinaliza√ß√£o el√©trica/√≥ptica usada
      para transportar os bits.

      ===========================================================
      Agrupamento por Pilha de Protocolos:
      - Ethernet ‚Üí Camadas 1 e 2
      - TCP/IP   ‚Üí Camadas 3 e 4
      - CIP      ‚Üí Camadas 5 a 7
      ===========================================================
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 3840.0
    y1: -2600.0
    z_index: 11
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      ===========================================================
              DIFEREN√áA ENTRE LAYER 2 E LAYER 3 (EtherNet/IP)
      ===========================================================

      Layer 2 - Enlace de Dados (Ethernet MAC)
      ----------------------------------------
      - Trabalha com endere√ßos MAC (identificadores f√≠sicos das interfaces).
      - Respons√°vel por entregar quadros Ethernet dentro de uma mesma VLAN.
      - Quando o cart√£o EtherNet/IP da Rockwell est√° configurado em uma VLAN,
        ele s√≥ se comunica com dispositivos na mesma VLAN.
      - O switch Cisco atua como switch Layer 2, encaminhando quadros com base
        nos endere√ßos MAC e mantendo o tr√°fego isolado por VLAN.

      Resultado: comunica√ß√£o restrita ao dom√≠nio Layer 2 (mesma VLAN).

      -----------------------------------------------------------

      Layer 3 - Rede (IP)
      ----------------------------------------
      - Trabalha com endere√ßos IP e permite comunica√ß√£o entre diferentes VLANs.
      - Quando o switch Cisco tem roteamento habilitado (ip routing),
        ele passa a atuar como roteador Layer 3.
      - Isso cria a possibilidade de inter-VLAN routing, ou seja,
        dispositivos em VLANs diferentes podem se comunicar via IP.
      - O EtherNet/IP continua encapsulado em TCP/UDP/IP, mas agora o switch
        faz a fun√ß√£o de rotear pacotes IP entre VLANs distintas.

      Resultado: comunica√ß√£o entre diferentes VLANs via Layer 3.

      -----------------------------------------------------------

      Exemplo pr√°tico:
      ----------------------------------------
      1. Layer 2:
         - Cart√£o EtherNet/IP configurado na VLAN 10.
         - Comunica√ß√£o apenas com dispositivos na VLAN 10.
         - Switch Cisco encaminha quadros Ethernet com base em MAC.

      2. Layer 3:
         - Switch Cisco com roteamento habilitado.
         - Interfaces VLAN (SVI) configuradas:
           VLAN 10 ‚Üí IP 192.168.10.1
           VLAN 20 ‚Üí IP 192.168.20.1
         - Switch roteia pacotes IP entre VLAN 10 e VLAN 20.
         - Cart√£o EtherNet/IP na VLAN 10 pode conversar com dispositivos na VLAN 20 via IP.

      -----------------------------------------------------------

      Conclus√£o:
      ----------------------------------------
      - Layer 2 ‚Üí comunica√ß√£o dentro da mesma VLAN, baseada em MAC.
      - Layer 3 ‚Üí comunica√ß√£o entre VLANs, baseada em IP, com roteamento habilitado.
      - No cen√°rio: cart√£o EtherNet/IP da Rockwell est√° em Layer 2 quando limitado √† VLAN.
        Ao habilitar roteamento no switch Cisco, voc√™ passa a operar em Layer 3,
        permitindo integra√ß√£o entre VLANs diferentes.

      ===========================================================
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 4720.0
    y1: -2600.0
    z_index: 12
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      ## üîß explicacao do codigo roteador
      - version 17.16 ‚Üí Vers√£o do IOS (sistema operacional da Cisco).
      - service timestamps debug/log datetime msec ‚Üí Adiciona data/hora (com milissegundos) nos logs e mensagens de debug.
      - hostname Roteador ‚Üí Nome do dispositivo na rede.
      - boot-start-marker / boot-end-marker ‚Üí Marcadores usados pelo sistema para identificar in√≠cio/fim da configura√ß√£o de boot.
      - no aaa new-model ‚Üí N√£o est√° usando AAA (Authentication, Authorization, Accounting) centralizado.

      ## üîí Seguran√ßa e certificados
      - crypto pki trustpoint TP-self-signed-131184642 ‚Üí Cria um ponto de confian√ßa para certificados.
      - enrollment selfsigned ‚Üí O certificado √© autoassinado.
      - subject-name cn=IOS-Self-Signed-Certificate-131184642 ‚Üí Nome comum do certificado.
      - hash sha512 ‚Üí Algoritmo de hash usado.
      - crypto pki certificate chain ‚Ä¶ ‚Üí Bloco que mostra o certificado autoassinado.

      ## ‚ö° Processamento e protocolos
      - ip cef ‚Üí Ativa CEF (Cisco Express Forwarding), que melhora desempenho no roteamento.
      - no ipv6 cef ‚Üí Desativa CEF para IPv6.
      - memory free low-watermark processor 79983 ‚Üí Limite de mem√≥ria livre para alertas.
      - spanning-tree mode rapid-pvst ‚Üí Usa Rapid PVST (variante r√°pida do Spanning Tree Protocol).

      ## üåê Interfaces
      - Ethernet0/0 ‚Üí Sem IP configurado.
      - Ethernet0/0.10
        - encapsulation dot1Q 10 ‚Üí Subinterface para VLAN 10.
        - ip address 192.168.10.1 255.255.255.0 ‚Üí IP da subinterface.
        - ip nat inside ‚Üí Define como interface interna para NAT.
      - Ethernet0/1 ‚Üí Sem IP.
      - Ethernet0/1.20
        - VLAN 20, IP 192.168.20.1/24, NAT inside.
      - Ethernet0/2
        - ip address 192.168.255.100 255.255.255.0 ‚Üí IP da interface externa.
        - ip nat outside ‚Üí Interface externa para NAT.
      - Ethernet0/3 ‚Üí Sem IP, desligada (shutdown).
      - Serial1/0 a Serial1/3 ‚Üí Todas desligadas (shutdown).

      ## üì° Servi√ßos e NAT
      - ip http server / ip http secure-server ‚Üí Ativa servidor HTTP e HTTPS para ger√™ncia.
      - ip nat inside source list 1 interface Ethernet0/2 overload
        - Faz NAT (mascaramento) para os endere√ßos definidos na ACL 1.
        - Usa o IP da interface Ethernet0/2 como sa√≠da.
        - overload ‚Üí Permite m√∫ltiplos hosts compartilharem o mesmo IP p√∫blico (PAT).
      - ip route 0.0.0.0 0.0.0.0 192.168.255.1 ‚Üí Rota default apontando para o gateway 192.168.255.1.
      - ip ssh bulk-mode 131072 ‚Üí Configura√ß√£o de SSH para conex√µes simult√¢neas.
      - no logging btrace ‚Üí Desativa logs de btrace.

      ## üõ°Ô∏è ACL (Access Control List)
      - ip access-list standard 1
        - 10 permit 192.168.10.0 0.0.0.255 ‚Üí Permite rede 192.168.10.0/24.
        - 20 permit 192.168.20.0 0.0.0.255 ‚Üí Permite rede 192.168.20.0/24.
        ‚Üí Essa ACL √© usada pelo NAT.

      ## üéõÔ∏è Linhas de acesso
      - line con 0 ‚Üí Console.
        - logging synchronous ‚Üí Evita que mensagens interrompam comandos digitados.
      - line aux 0 ‚Üí Porta auxiliar (n√£o configurada).
      - line vty 0 4 ‚Üí Linhas virtuais (Telnet/SSH).
        - login ‚Üí Exige login.
        - transport input ssh ‚Üí S√≥ permite acesso remoto via SSH.

      ## üìå Resumindo
      Esse roteador est√° configurado para:
      - Ser o gateway das redes 192.168.10.0/24 (VLAN 10) e 192.168.20.0/24 (VLAN 20).
      - Fazer NAT/PAT para que essas redes acessem a internet via 192.168.255.100.
      - Ter acesso remoto seguro via SSH.
      - Ter servidor de administra√ß√£o via HTTP/HTTPS.
      - Usar Spanning Tree Rapid PVST para evitar loops na rede.
      - Usar certificado autoassinado para conex√µes seguras.
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 3840.0
    y1: -1080.0
    z_index: 13
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      ### Explica√ß√£o detalhada da rota default

      Comando:
      ip route 0.0.0.0 0.0.0.0 192.168.255.1

      1. ip route
         ‚Üí Indica que estamos configurando uma rota est√°tica no roteador.

      2. 0.0.0.0 0.0.0.0
         ‚Üí Esse par (endere√ßo e m√°scara) representa a "rota default".
         ‚Üí O primeiro 0.0.0.0 √© o endere√ßo de rede.
         ‚Üí O segundo 0.0.0.0 √© a m√°scara.
         ‚Üí Juntos significam: "qualquer destino".
         ‚Üí Ou seja, se o roteador receber um pacote para um IP que n√£o est√° em nenhuma rota espec√≠fica da tabela, ele usar√° essa rota.

      3. 192.168.255.1
         ‚Üí Esse √© o "next-hop" (pr√≥ximo salto).
         ‚Üí √â o gateway para onde o roteador deve enviar os pacotes desconhecidos.
         ‚Üí Normalmente esse IP pertence ao modem ou outro roteador que conecta √† internet.

      ---

      ### Por que usar 0.0.0.0/0?
      - Em roteamento, quanto mais espec√≠fica a m√°scara, maior a prioridade.
      - 0.0.0.0/0 √© a m√°scara menos espec√≠fica poss√≠vel.
      - Isso cobre todos os endere√ßos IPv4.
      - Assim, essa rota funciona como um "coringa" ou "rota de fuga".

      ---

      ### Fun√ß√£o pr√°tica
      - O roteador conhece suas redes internas (192.168.10.0/24 e 192.168.20.0/24).
      - Quando um PC dessas redes tenta acessar, por exemplo, 8.8.8.8 (Google DNS), o roteador n√£o tem rota espec√≠fica para esse IP.
      - Ele consulta a tabela de rotas e encontra a rota default.
      - Resultado: o pacote √© enviado para 192.168.255.1, que √© o gateway para a internet.

      ---

      ### Diferen√ßa entre configurar com next-hop ou interface
      1. Usando next-hop:
         ip route 0.0.0.0 0.0.0.0 192.168.255.1
         ‚Üí O roteador envia tudo para esse IP espec√≠fico.

      2. Usando interface de sa√≠da:
         ip route 0.0.0.0 0.0.0.0 Ethernet0/2
         ‚Üí O roteador joga os pacotes diretamente pela interface.

      No seu caso, foi usado o gateway 192.168.255.1, que provavelmente √© o equipamento que conecta √† internet.

      ---

      ### Resumo simples
      - 0.0.0.0 0.0.0.0 = "qualquer destino"
      - 192.168.255.1 = "mande para esse gateway"
      ‚Üí Assim, o roteador sabe para onde enviar pacotes desconhecidos, garantindo que os hosts internos tenham acesso √† internet.
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 5040.0
    y1: -1040.0
    z_index: 14
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      ----------------------------------------------------------------------------------------------------------------
      Comparativo entre Modelo TCP/IP e Modelo Ethernet/IP
      ----------------------------------------------------------------------------------------------------------------

      Aspecto                  | TCP/IP                          | Ethernet/IP
      ----------------------------------------------------------------------------------------------------------------
      Origem                   | Desenvolvido pela DARPA (anos 70)| Desenvolvido pela Rockwell e ODVA (anos 90)
      ----------------------------------------------------------------------------------------------------------------
      Objetivo                 | Modelo de comunica√ß√£o universal | Protocolo industrial baseado em Ethernet
      ----------------------------------------------------------------------------------------------------------------
      Camadas                  | 4 camadas:                     | Baseado no TCP/IP + CIP (Common Industrial Protocol)
                               | - Aplica√ß√£o                    | - Usa Ethernet como meio f√≠sico
                               | - Transporte                   | - Integra protocolos industriais
                               | - Internet                     |
                               | - Acesso √† rede                |
      ----------------------------------------------------------------------------------------------------------------
      Uso principal            | Internet, redes corporativas    | Automa√ß√£o industrial, controle de dispositivos
      ----------------------------------------------------------------------------------------------------------------
      Protocolos associados    | HTTP, FTP, SMTP, DNS, etc.      | CIP, Modbus/TCP, DeviceNet sobre Ethernet
      ----------------------------------------------------------------------------------------------------------------
      Comunica√ß√£o              | Entre computadores e servidores | Entre controladores, sensores e atuadores
      ----------------------------------------------------------------------------------------------------------------
      Padroniza√ß√£o             | RFCs (IETF)                    | ODVA (Open DeviceNet Vendors Association)
      ----------------------------------------------------------------------------------------------------------------
      Seguran√ßa                | TLS, IPSec                     | Depende da implementa√ß√£o, pode usar TLS/IPSec
      ----------------------------------------------------------------------------------------------------------------
      Escopo                   | Global (Internet)              | Local/industrial (f√°bricas, plantas industriais)
      ----------------------------------------------------------------------------------------------------------------
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 3080.0
    y1: -4000.0
    z_index: 15
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      ---------------------------------------------------------------------------------------------------------
      Comparativo entre OSI, TCP/IP e Ethernet/IP
      ---------------------------------------------------------------------------------------------------------

      Camadas OSI (7)          | Modelo TCP/IP (4)              | Modelo Ethernet/IP
      ---------------------------------------------------------------------------------------------------------
      7 - Aplica√ß√£o            | Aplica√ß√£o                      | CIP (Common Industrial Protocol)
      6 - Apresenta√ß√£o         | (Inclu√≠da na Aplica√ß√£o)        | CIP (dados estruturados, objetos industriais)
      5 - Sess√£o               | (Inclu√≠da na Aplica√ß√£o)        | CIP (gerenciamento de conex√µes industriais)
      ---------------------------------------------------------------------------------------------------------
      4 - Transporte           | Transporte                     | TCP/UDP (transporte confi√°vel ou r√°pido)
      ---------------------------------------------------------------------------------------------------------
      3 - Rede                 | Internet                       | IP (IPv4/IPv6)
      ---------------------------------------------------------------------------------------------------------
      2 - Enlace de Dados      | Acesso √† Rede                  | Ethernet (IEEE 802.3)
      ---------------------------------------------------------------------------------------------------------
      1 - F√≠sica               | Acesso √† Rede                  | Cabo, fibra, r√°dio (meio f√≠sico)
      ---------------------------------------------------------------------------------------------------------
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 4320.0
    y1: -3840.0
    z_index: 16
smart_annotations: []
nodes:
  - boot_disk_size: null
    configuration: []
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n0
    image_definition: null
    label: iol-4s-0
    node_definition: iol-xe-serial-4eth
    parameters: {}
    ram: null
    tags: []
    x: 2480
    y: -1960
    interfaces:
      - id: i0
        label: Loopback0
        mac_address: null
        type: loopback
      - id: i1
        label: Ethernet0/0
        mac_address: null
        type: physical
        slot: 0
      - id: i2
        label: Ethernet0/1
        mac_address: null
        type: physical
        slot: 1
      - id: i3
        label: Ethernet0/2
        mac_address: null
        type: physical
        slot: 2
      - id: i4
        label: Ethernet0/3
        mac_address: null
        type: physical
        slot: 3
      - id: i5
        label: Serial1/0
        mac_address: null
        type: physical
        slot: 4
      - id: i6
        label: Serial1/1
        mac_address: null
        type: physical
        slot: 5
      - id: i7
        label: Serial1/2
        mac_address: null
        type: physical
        slot: 6
      - id: i8
        label: Serial1/3
        mac_address: null
        type: physical
        slot: 7
  - boot_disk_size: null
    configuration: []
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n1
    image_definition: null
    label: iol-l2-0
    node_definition: ioll2-xe
    parameters: {}
    ram: null
    tags: []
    x: 2320
    y: -1840
    interfaces:
      - id: i0
        label: Loopback0
        mac_address: null
        type: loopback
      - id: i1
        label: Ethernet0/0
        mac_address: null
        type: physical
        slot: 0
      - id: i2
        label: Ethernet0/1
        mac_address: null
        type: physical
        slot: 1
      - id: i3
        label: Ethernet0/2
        mac_address: null
        type: physical
        slot: 2
      - id: i4
        label: Ethernet0/3
        mac_address: null
        type: physical
        slot: 3
  - boot_disk_size: null
    configuration: []
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n2
    image_definition: null
    label: iol-l2-1
    node_definition: ioll2-xe
    parameters: {}
    ram: null
    tags: []
    x: 2640
    y: -1840
    interfaces:
      - id: i0
        label: Loopback0
        mac_address: null
        type: loopback
      - id: i1
        label: Ethernet0/0
        mac_address: null
        type: physical
        slot: 0
      - id: i2
        label: Ethernet0/1
        mac_address: null
        type: physical
        slot: 1
      - id: i3
        label: Ethernet0/2
        mac_address: null
        type: physical
        slot: 2
      - id: i4
        label: Ethernet0/3
        mac_address: null
        type: physical
        slot: 3
  - boot_disk_size: null
    configuration: []
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n3
    image_definition: null
    label: ext-conn-0
    node_definition: external_connector
    parameters: {}
    ram: null
    tags: []
    x: 2480
    y: -2080
    interfaces:
      - id: i0
        label: port
        mac_address: null
        type: physical
        slot: 0
  - boot_disk_size: null
    configuration: []
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n4
    image_definition: null
    label: desktop-0
    node_definition: desktop
    parameters: {}
    ram: null
    tags: []
    x: 2160
    y: -1840
    interfaces:
      - id: i0
        label: eth0
        mac_address: null
        type: physical
        slot: 0
  - boot_disk_size: null
    configuration: []
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n5
    image_definition: null
    label: desktop-1
    node_definition: desktop
    parameters: {}
    ram: null
    tags: []
    x: 2800
    y: -1840
    interfaces:
      - id: i0
        label: eth0
        mac_address: null
        type: physical
        slot: 0
links:
  - id: l0
    n1: n0
    n2: n2
    i1: i2
    i2: i3
    conditioning: {}
    label: iol-4s-0-Ethernet0/1<->iol-l2-1-Ethernet0/2
  - id: l1
    n1: n1
    n2: n0
    i1: i3
    i2: i1
    conditioning: {}
    label: iol-l2-0-Ethernet0/2<->iol-4s-0-Ethernet0/0
  - id: l2
    n1: n2
    n2: n5
    i1: i2
    i2: i0
    conditioning: {}
    label: iol-l2-1-Ethernet0/1<->desktop-1-eth0
  - id: l3
    n1: n4
    n2: n1
    i1: i0
    i2: i2
    conditioning: {}
    label: desktop-0-eth0<->iol-l2-0-Ethernet0/1
  - id: l4
    n1: n3
    n2: n0
    i1: i0
    i2: i3
    conditioning: {}
    label: ext-conn-0-port<->iol-4s-0-Ethernet0/2
lab:
  description: Laborat√≥rio para simular ambiente industrial entre vlan's e comunica√ß√£o
    externa.
  notes: ''
  title: KraftHeinzt 05:18 AM
  version: 0.3.0
